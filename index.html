<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>NodeJS Pianobar Frontend</title>
	<link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css">
  </head>
  <body>
	<div class="container">

           <div class="btn-group btn-group-justified" id="controls">
                   <div class="btn-group"> <button type="button" class="btn btn-default btn-lg" onclick="sendCommand('p');">
                           <span class="glyphicon glyphicon-pause"></span>
                   </button> </div>
                   <div class="btn-group"> <button type="button" class="btn btn-default btn-lg" onclick="sendCommand('n');">
                           <span class="glyphicon glyphicon-fast-forward"></span>
                   </button> </div>
                   <div class="btn-group"> <button type="button" class="btn btn-default btn-lg" onclick="sendCommand('+');">
                           <span class="glyphicon glyphicon-thumbs-up"></span>
                   </button> </div>
                   <div class="btn-group"> <button type="button" class="btn btn-default btn-lg" onclick="sendCommand('-');">
                           <span class="glyphicon glyphicon-thumbs-down"></span>
                   </button> </div>
                   <div class="btn-group"> <button type="button" class="btn btn-default btn-lg" onclick="sendCommand('(');">
                           <span class="glyphicon glyphicon-volume-down"></span>
                   </button> </div>
                   <div class="btn-group"> <button type="button" class="btn btn-default btn-lg" onclick="sendCommand(')');">
                           <span class="glyphicon glyphicon-volume-up"></span>
                   </button> </div>
           </div>


	<div class="media">
		<img class="media-object img-responsive pull-left" id="coverArt" />

		<div class="media-body">
			<div>
				<span id="lovehate" class="pull-left"></span>
				<h1 id="title" class="media-heading"></h1>
			</div>

			<h2 id="albumartist"></h2>

			<ol id="stationList"></ol>

		</div>
	</div>

	</div>


<script src="/socket.io/socket.io.js"></script>
<script>

	var socket = io();

	socket.on('start', function(msg) {
		document["coverArt"].src = msg.coverArt;
		document["coverArt"].alt = msg.album;
		document.getElementById('title').innerHTML = msg.title;
		var aa = 'on ' + msg.album + ' by ' + msg.artist;
		document.getElementById('albumartist').innerHTML = aa;
	});

	socket.on('lovehate', function(msg) {
		if (msg.rating == 1) {
			rating = 'love';
		} else {
			rating = 'hate';
		}

		document.getElementById('lovehate').innerHTML = rating;
	});

	function appendStation(station) {
		var ul = document.getElementById("stationList");
		var li = document.createElement("li");
		li.appendChild(document.createTextNode(station[1]));
		li.setAttribute("id", station[0]);
		ul.appendChild(li);
	}

	function parseStation(stations) {
		var a = stations.split(":");
		appendStation(a);
	}

	socket.on('stations', function(msg) {
		document.getElementById("stationList").innerHTML = "";
		for (i in msg.stations) {
			parseStation(msg.stations[i]);
		}
	});

	function sendCommand(action) {
		socket.emit('action', { action: action });
	}

</script>
</body>
</html>
